<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Shroppie | Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f6f8;
}
header {
  background: #1a73e8;
  color: white;
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
}
nav a {
  color: white;
  margin-left: 15px;
  text-decoration: none;
  font-weight: bold;
}
.section {
  padding: 40px 20px;
  max-width: 1100px;
  margin: auto;
}
.card {
  background: white;
  padding: 20px;
  border-radius: 8px;
  margin-bottom: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
button {
  background: #1a73e8;
  color: white;
  border: none;
  padding: 10px 16px;
  border-radius: 5px;
  cursor: pointer;
}
button:hover { background: #1558b0; }
input {
  width: 100%;
  padding: 10px;
  margin: 8px 0;
}
.hidden { display: none; }
.cartBox {
  position: fixed;
  top: 15px;
  right: 20px;
  background: white;
  padding: 10px 15px;
  border-radius: 20px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  font-weight: bold;
}
</style>
</head>

<body>

<header>
  <h2>shroppie.com</h2>
  <nav>
    <a href="#vendors">Sell</a>
    <a href="#products">Shop</a>
    <a href="#checkout">Checkout</a>
  </nav>
</header>

<div class="cartBox">üõí Cart: <span id="cartCount">0</span></div>

<section class="section">
  <h1>Multi-Vendor Marketplace MVP</h1>
  <p>Businesses add products ‚Üí customers checkout & pay</p>
</section>

<!-- VENDOR REGISTRATION -->
<section id="vendors" class="section">
  <h2>üè™ Vendor Registration</h2>
  <div class="card">
    <form onsubmit="registerVendor(event)">
      <input id="vendorName" placeholder="Business Name" required>
      <input id="vendorEmail" type="email" placeholder="Business Email" required>
      <button type="submit">Register Vendor</button>
    </form>
    <p id="vendorMsg"></p>
  </div>
</section>

<!-- ADD PRODUCT -->
<section class="section hidden" id="productForm">
  <h2>üì¶ Add Product</h2>
  <div class="card">
    <form onsubmit="addProduct(event)">
      <input id="productName" placeholder="Product Name" required>
      <input id="productPrice" placeholder="Price" required>
      <button type="submit">Add Product</button>
    </form>
  </div>
</section>

<!-- PRODUCTS -->
<section id="products" class="section">
  <h2>üõí Products</h2>
  <div id="productList"></div>
</section>

<!-- CHECKOUT -->
<section id="checkout" class="section hidden">
  <h2>üí≥ Checkout</h2>
  <div class="card">
    <ul id="checkoutItems"></ul>
    <h3>Total: $<span id="totalPrice">0</span></h3>

    <h4>Payment Details</h4>
    <input placeholder="Card Number (demo)">
    <input placeholder="Expiry MM/YY">
    <input placeholder="CVV">
    <button onclick="payNow()">Pay Now</button>

    <p id="paymentMsg"></p>
  </div>
</section>

<script>
let vendors = JSON.parse(localStorage.getItem("vendors")) || [];
let products = JSON.parse(localStorage.getItem("products")) || [];
let cart = JSON.parse(localStorage.getItem("cart")) || [];

cartCount.innerText = cart.length;

function registerVendor(e) {
  e.preventDefault();
  vendors.push(vendorName.value);
  localStorage.setItem("vendors", JSON.stringify(vendors));
  vendorMsg.innerText = "‚úÖ Vendor registered. Add products below.";
  document.getElementById("productForm").classList.remove("hidden");
}

function addProduct(e) {
  e.preventDefault();
  products.push({
    name: productName.value,
    price: parseFloat(productPrice.value),
    vendor: vendors[vendors.length - 1]
  });
  localStorage.setItem("products", JSON.stringify(products));
  renderProducts();
  productName.value = "";
  productPrice.value = "";
}

function renderProducts() {
  productList.innerHTML = "";
  products.forEach((p, i) => {
    productList.innerHTML += `
      <div class="card">
        <h3>${p.name}</h3>
        <p>Sold by ${p.vendor}</p>
        <strong>$${p.price}</strong><br><br>
        <button onclick="addToCart(${i})">Add to Cart</button>
      </div>`;
  });
}

function addToCart(i) {
  cart.push(products[i]);
  localStorage.setItem("cart", JSON.stringify(cart));
  cartCount.innerText = cart.length;
}

function loadCheckout() {
  checkoutItems.innerHTML = "";
  let total = 0;
  cart.forEach(item => {
    checkoutItems.innerHTML += `<li>${item.name} - $${item.price}</li>`;
    total += item.price;
  });
  totalPrice.innerText = total.toFixed(2);
  document.getElementById("checkout").classList.remove("hidden");
}

function payNow() {
  paymentMsg.innerText = "‚úÖ Payment successful! Order placed.";
  cart = [];
  localStorage.removeItem("cart");
  cartCount.innerText = 0;
}

window.addEventListener("hashchange", () => {
  if (location.hash === "#checkout") loadCheckout();
});

renderProducts();
</script>

</body>
</html>
